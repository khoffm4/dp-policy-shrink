---
title: "Regression Analysis"
author: "Ryan Steed"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r deps}
source("R/utils.R")
```

## Regression analysis
```{r regressions}
regression_tables("baseline", F, 10)
```


## Treatment comparison
```{r treatments}
test_experiment = "epsilon"
experiment = load_experiment(test_experiment, 100)
```


```{r treatment-gam}
experiment_name = "hold_harmless"
for (t in unique(experiment$treatment)) {
  print(sprintf("%s: %s", experiment_name, t))
  gam_mr = get_gam(
    sprintf("%s_%s", experiment_name, t),
    F,
    from_cache,  # load gam from cache?
    experiment %>% filter(treatment == t)
  )
  plotname = sprintf("%s_%s", experiment_name, t)
  viz = get_gam_viz(
    plotname,
    from_cache,  # load viz from cache?
    gam_mr
  )
  plot_gam(viz, plotname)
}
```

```{r plot-all, warning=FALSE}
source("R/plot_all.R")
```

